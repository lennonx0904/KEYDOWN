{"version":3,"sources":["component/Nav/Logo.js","actions/showingActions.js","actions/firebase.js","actions/authActions.js","component/Nav/NavButtons.js","component/Nav/NavButtonsMobile.js","component/Nav/Nav.js","component/AuthForm/SignUpForm.js","component/AuthForm/LoginForm.js","component/AuthForm/AuthForm.js","component/Home/index.js","actions/selectSongActions.js","component/SelectSong/SelectSong.js","component/Game/GameCanvas.js","component/Game/PlayerCanvas.js","component/Game/BestRecord.js","component/Game/CurrentSocre.js","actions/gameActions.js","actions/rankingActions.js","component/Game/helpers.js","component/Game/player.js","component/Game/mainGame.js","component/Game/Game.js","component/Ranking/CurrentRank.js","component/Ranking/Record.js","component/Ranking/Ranking.js","component/App.js","redeucers/songListReducer.js","redeucers/showingReducer.js","redeucers/authReducer.js","redeucers/rankingReducer.js","redeucers/gameReducer.js","redeucers/index.js","index.js","img/menu.png"],"names":["Logo","react_default","a","createElement","className","react_router_dom","to","showLoginForm","boolean","type","payload","showSignUpForm","showMobileButtons","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","db","firestore","logOut","dispatch","auth","signOut","then","NavButtons","renderLogInAndSignUpBtn","_this$props","_this","props","showing","Fragment","onClick","disabled","signUpForm","loginForm","renderLogOutBtn","this","uid","React","Component","connect","state","NavButtonsMobile","Nav","checkAuthState","window","location","hash","Nav_Logo","name","current","mobileButtons","src","menu","alt","Nav_NavButtons","Nav_NavButtonsMobile","onAuthStateChanged","user","collection","doc","get","data","userName","SignUpForm","email","password","comfirmPassword","changeInputState","e","setState","Object","defineProperty","target","value","submitHandler","preventDefault","signUp","renderSignUpForm","onSubmit","onChange","authError","createUserWithEmailAndPassword","res","set","catch","error","message","LoginForm","logIn","renderLogInForm","signInWithEmailAndPassword","AuthForm","_this$props$showing","AuthForm_SignUpForm","AuthForm_LoginForm","Home","SelectSong","fetchSongList","songList","map","song","key","id","title","concat","renderSongList","playingSongData","arr","orderBy","querySnapshot","forEach","toConsumableArray","GameCanvas","width","height","PlayerCanvas","ref","getCanvas","BestRecord","record","slice","score","CurrentSocre","storeRecordToDB","difficutly","add","console","log","fetchRankingRecord","docId","limit","q","push","updateLocalStorage","tempObj","JSON","parse","localStorage","rankingData","stringify","drawTrack","beginX","trackIndex","unit","ctx","document","querySelector","getContext","cw","ch","beginPath","moveTo","lineTo","closePath","fillStyle","fill","clearCanvas","clearRect","drawJudgeEffect","text","combo","save","translate","textAlign","font","fillText","restore","setTimeout","drawFinishState","currentScore","drawScoreTimer","setInterval","rect","clearInterval","getRankingData","_JSON$parse","total","hit","miss","accurate","Math","round","rank","player","noteA","noteB","noteC","noteD","audio","btnD","btnF","btnK","btnL","currentSocre","judge","noteArray","notePosY","centerPos","y","splice","pow","comboScoreCounter","textContent","judgeA","judgeB","judgeC","judgeD","play","keyCode","classList","keyupUI","remove","addEventListener","removeEventListener","mainGame","beatData","offset","difficulty","speed","bpm","lastPosition","degA","atan2","degB","tan","overHeight","line","p1","p2","color","shadowColor","x","strokeStyle","shadowBlur","lineWidth","stroke","Pos","classCallCheck","Note","args","def","pos1","pos2","assign","createClass","abs","render","drawBackground","i","getFixedTime","float","parseFloat","toFixed","removeNotes","index","startGameTimer","currentTime","deltaTime","filter","length","update","pause","Game","createRef","setCanvasSize","innerWidth","storeRecord","addZero","number","date","Date","time","getFullYear","getMonth","getDate","getHours","getMinutes","_this2","match","fetchPlayingSongData","setInGameState","params","search","drawReadyState","startGame","_this3","_this$props2","game","setGameFinishState","drawComingSoon","inGame","gameFinish","setItem","stopGame","_this$props3","btnStyle","margin","ranking","Game_BestRecord","Game_CurrentSocre","Game_GameCanvas","Game_PlayerCanvas","style","songId","obj","Audio","url","CurrentRank","Record","rankingRecord","Ranking","removeItem","Ranking_CurrentRank","Ranking_Record","App","component_Nav_Nav","component_AuthForm_AuthForm","react_router","path","exact","component","songListReducer","arguments","undefined","action","initState","showingReducer","objectSpread","authReducer","rankingReducer","gameReducer","combineReducers","store","createStore","reducers","applyMiddleware","thunk","ReactDOM","es","component_App","getElementById","module","exports"],"mappings":"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","file":"static/js/main.1c768972.chunk.js","sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nconst Logo = () => {\n  return (\n    <div className=\"logo\">\n      <Link to=\"/\">KEYDOWN</Link>\n    </div>\n  );\n};\n\nexport default Logo;\n","export const showLoginForm = boolean => {\n  return {\n    type: \"SHOW_LOGIN_FORM\",\n    payload: boolean\n  };\n};\n\nexport const showSignUpForm = boolean => {\n  return {\n    type: \"SHOW_SIGNUP_FORM\",\n    payload: boolean\n  };\n};\n\nexport const showMobileButtons = boolean => {\n  return {\n    type: \"SHOW_MOBILE_BUTTONS\",\n    payload: boolean\n  };\n};\n","import firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyBpuiUbM6r9pKhzKP6xHSSaANIEe_rwPrc\",\n  authDomain: \"keyboard-game-64e45.firebaseapp.com\",\n  databaseURL: \"https://keyboard-game-64e45.firebaseio.com\",\n  projectId: \"keyboard-game-64e45\",\n  storageBucket: \"keyboard-game-64e45.appspot.com\",\n  messagingSenderId: \"697558300831\"\n};\n\nfirebase.initializeApp(firebaseConfig);\n\nexport default firebase;\n","import firebase from \"./firebase\";\nimport \"firebase/auth\";\nconst db = firebase.firestore();\n\nexport const logIn = data => dispatch => {\n  firebase\n    .auth()\n    .signInWithEmailAndPassword(data.email, data.password)\n    .then(() => {\n      firebase.auth().onAuthStateChanged(user => {\n        dispatch({ type: \"LOGIN_SUCCESS\" });\n      });\n    })\n    .catch(error => {\n      dispatch({ type: \"LOGIN_ERROR\", payload: error });\n    });\n};\n\nexport const logOut = () => dispatch => {\n  firebase\n    .auth()\n    .signOut()\n    .then(() => {\n      dispatch({ type: \"LOGOUT_SUCCESS\" });\n    });\n};\n\nexport const signUp = data => dispatch => {\n  const { userName, email, password, comfirmPassword } = data;\n  if (userName === \"\") {\n    dispatch({ type: \"SIGH_UP_ERROR\", payload: \"Please enter your name\" });\n    return;\n  }\n  if (password !== comfirmPassword) {\n    dispatch({\n      type: \"SIGH_UP_ERROR\",\n      payload: \"Please comfirm your password\"\n    });\n    return;\n  }\n  firebase\n    .auth()\n    .createUserWithEmailAndPassword(email, password)\n    .then(res => {\n      let uid = res.user.uid;\n      dispatch({ type: \"STORE_USER_UID\", payload: uid });\n      db.collection(\"users\")\n        .doc(uid)\n        .set({ userName, email });\n    })\n    .then(() => {\n      dispatch({ type: \"SIGH_UP_SUCCESS\" });\n    })\n    .catch(error => {\n      dispatch({ type: \"SIGH_UP_ERROR\", payload: error.message });\n    });\n};\n\nexport const checkAuthState = () => dispatch => {\n  firebase.auth().onAuthStateChanged(user => {\n    if (user) {\n      dispatch({ type: \"FETCH_USER_UID\", payload: user.uid });\n      db.collection(\"users\")\n        .doc(user.uid)\n        .get()\n        .then(doc => {\n          if (doc) {\n            dispatch({ type: \"FETCH_USER_NAME\", payload: doc.data().userName });\n          }\n        });\n    } else {\n      dispatch({ type: \"FETCH_USER_UID\", payload: null });\n    }\n  });\n};\n","import React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { showLoginForm, showSignUpForm } from \"../../actions/showingActions\";\nimport { logOut } from \"../../actions/authActions\";\n\nclass NavButtons extends React.Component {\n  renderLogInAndSignUpBtn = () => {\n    const { showing, showLoginForm, showSignUpForm } = this.props;\n    return (\n      <>\n        <button\n          className=\"log-in nav-button\"\n          onClick={() => {\n            showLoginForm(true);\n          }}\n          disabled={showing.signUpForm}\n        >\n          Log In\n        </button>\n        <button\n          className=\"sigh-in nav-button\"\n          onClick={() => {\n            showSignUpForm(true);\n          }}\n          disabled={showing.loginForm}\n        >\n          Sign Up\n        </button>\n      </>\n    );\n  };\n\n  renderLogOutBtn = () => {\n    return (\n      <>\n        <button className=\"log-out nav-button\" onClick={this.props.logOut}>\n          Log Out\n        </button>\n      </>\n    );\n  };\n\n  render() {\n    return (\n      <div className=\"buttons\">\n        {this.props.auth.uid\n          ? this.renderLogOutBtn()\n          : this.renderLogInAndSignUpBtn()}\n      </div>\n    );\n  }\n}\n\nconst mapStatetoProps = state => {\n  return {\n    auth: state.auth,\n    showing: state.showing\n  };\n};\n\nexport default connect(\n  mapStatetoProps,\n  { showLoginForm, showSignUpForm, logOut }\n)(NavButtons);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport {\n  showLoginForm,\n  showSignUpForm,\n  showMobileButtons\n} from \"../../actions/showingActions\";\nimport { logOut } from \"../../actions/authActions\";\n\nclass NavButtonsMobile extends React.Component {\n  renderLogInAndSignUpBtn = () => {\n    const { showLoginForm, showSignUpForm, showMobileButtons } = this.props;\n    return (\n      <>\n        <button\n          className=\"mobile-btn\"\n          onClick={() => {\n            showMobileButtons(false);\n            showLoginForm(true);\n          }}\n        >\n          Log In\n        </button>\n        <button\n          className=\"mobile-btn\"\n          onClick={() => {\n            showMobileButtons(false);\n            showSignUpForm(true);\n          }}\n        >\n          Sign Up\n        </button>\n      </>\n    );\n  };\n\n  renderLogOutBtn = () => {\n    return (\n      <>\n        <button className=\"mobile-btn\" onClick={this.props.logOut}>\n          Log Out\n        </button>\n      </>\n    );\n  };\n\n  render() {\n    const { auth } = this.props;\n    return (\n      <>\n        <div className=\"mobile-buttons\">\n          {auth.uid ? this.renderLogOutBtn() : this.renderLogInAndSignUpBtn()}\n        </div>\n      </>\n    );\n  }\n}\n\nconst mapStatetoProps = state => {\n  return {\n    auth: state.auth,\n    showing: state.showing\n  };\n};\n\nexport default connect(\n  mapStatetoProps,\n  { showLoginForm, showSignUpForm, logOut, showMobileButtons }\n)(NavButtonsMobile);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport Logo from \"./Logo\";\nimport NavButtons from \"./NavButtons\";\nimport NavButtonsMobile from \"./NavButtonsMobile\";\nimport { showMobileButtons } from \"../../actions/showingActions\";\nimport { checkAuthState } from \"../../actions/authActions\";\nimport menu from \"../../img/menu.png\";\nimport \"./nav.css\";\n\nclass Nav extends React.Component {\n  componentDidMount() {\n    this.props.checkAuthState();\n    if (this.props.auth.uid !== \"W2xcTyxXs9Qk8qmqMFUlG5xfais2\") {\n      window.location.hash = \"#/\";\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.props.auth.uid !== \"W2xcTyxXs9Qk8qmqMFUlG5xfais2\") {\n      window.location.hash = \"#/\";\n    }\n  }\n\n  render() {\n    const { showing, showMobileButtons, auth } = this.props;\n    return (\n      <>\n        <div className=\"nav-bar\">\n          <Logo />\n          {auth.name ? <div className=\"greeting\">Hi ! {auth.name}</div> : null}\n          <button\n            className=\"menu-button\"\n            disabled={showing.loginForm || showing.signUpForm}\n            onClick={() => {\n              let current = showing.mobileButtons;\n              showMobileButtons(!current);\n            }}\n          >\n            <img src={menu} alt=\"\" />\n          </button>\n          <NavButtons />\n        </div>\n        {showing.mobileButtons ? <NavButtonsMobile /> : null}\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    auth: state.auth,\n    showing: state.showing\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  { checkAuthState, showMobileButtons }\n)(Nav);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { showSignUpForm } from \"../../actions/showingActions\";\nimport { signUp } from \"../../actions/authActions\";\n\nclass SignUpForm extends React.Component {\n  state = {\n    userName: \"\",\n    email: \"\",\n    password: \"\",\n    comfirmPassword: \"\"\n  };\n\n  changeInputState = e => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n\n  submitHandler = e => {\n    e.preventDefault();\n    this.props.signUp(this.state);\n  };\n\n  renderSignUpForm = () => {\n    return (\n      <div className=\"auth-view\">\n        <div className=\"auth-wrap\">\n          <form className=\"signup-form\" onSubmit={this.submitHandler}>\n            <i\n              className=\"fas fa-times exit-btn\"\n              onClick={() => {\n                this.props.showSignUpForm(false);\n              }}\n            />\n            <div>\n              <label>Name</label>\n              <br />\n              <input\n                type=\"text\"\n                name=\"userName\"\n                value={this.state.userName}\n                onChange={this.changeInputState}\n              />\n            </div>\n            <div>\n              <label>E-mail</label>\n              <br />\n              <input\n                type=\"text\"\n                name=\"email\"\n                value={this.state.email}\n                onChange={this.changeInputState}\n              />\n            </div>\n            <div>\n              <label>Password</label>\n              <br />\n              <input\n                type=\"password\"\n                name=\"password\"\n                value={this.state.password}\n                onChange={this.changeInputState}\n              />\n            </div>\n            <div>\n              <label>Comfirm Your Password</label>\n              <br />\n              <input\n                type=\"password\"\n                name=\"comfirmPassword\"\n                value={this.state.comfirmPassword}\n                onChange={this.changeInputState}\n              />\n            </div>\n            <button className=\"submit-btn\">Sigh Up</button>\n            <div>\n              {this.props.auth.authError ? (\n                <p>{this.props.auth.authError}</p>\n              ) : null}\n            </div>\n          </form>\n        </div>\n      </div>\n    );\n  };\n\n  render() {\n    return <>{this.props.auth.uid ? null : this.renderSignUpForm()}</>;\n  }\n}\n\nconst mapStateToProps = state => {\n  return { signUpForm: state.signUpForm, auth: state.auth };\n};\n\nexport default connect(\n  mapStateToProps,\n  { showSignUpForm, signUp }\n)(SignUpForm);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { showLoginForm } from \"../../actions/showingActions\";\nimport { logIn } from \"../../actions/authActions\";\n\nclass LoginForm extends React.Component {\n  state = {\n    email: \"\",\n    password: \"\"\n  };\n\n  changeInputState = e => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n\n  submitHandler = e => {\n    e.preventDefault();\n    this.props.logIn(this.state);\n  };\n\n  renderLogInForm = () => {\n    return (\n      <div className=\"auth-view\">\n        <div className=\"auth-wrap\">\n          <form className=\"login-form\" onSubmit={this.submitHandler}>\n            <i\n              className=\"fas fa-times exit-btn\"\n              onClick={() => {\n                this.props.showLoginForm(false);\n              }}\n            />\n            <div>\n              <label>E-mail</label>\n              <br />\n              <input\n                type=\"text\"\n                name=\"email\"\n                onChange={this.changeInputState}\n              />\n            </div>\n            <div>\n              <label>Password</label>\n              <br />\n              <input\n                type=\"password\"\n                name=\"password\"\n                onChange={this.changeInputState}\n              />\n            </div>\n            <button className=\"submit-btn\">Login</button>\n            <div>\n              {this.props.auth.authError ? (\n                <p>{this.props.auth.authError}</p>\n              ) : null}\n            </div>\n          </form>\n        </div>\n      </div>\n    );\n  };\n\n  render() {\n    return <>{this.props.auth.uid ? null : this.renderLogInForm()}</>;\n  }\n}\n\nconst mapStateToProps = state => {\n  return { auth: state.auth };\n};\n\nexport default connect(\n  mapStateToProps,\n  { showLoginForm, logIn }\n)(LoginForm);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport SignUpForm from \"./SignUpForm\";\nimport LoginForm from \"./LoginForm\";\nimport \"./authForm.css\";\n\nclass AuthForm extends React.Component {\n  render() {\n    const { signUpForm, loginForm } = this.props.showing;\n    return (\n      <>\n        {signUpForm && <SignUpForm />}\n        {loginForm && <LoginForm />}\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    showing: state.showing\n  };\n};\n\nexport default connect(mapStateToProps)(AuthForm);\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport \"./home.css\";\n\nclass Home extends React.Component {\n  render() {\n    return (\n      <div className=\"banner\">\n        <div className=\"enter-wrap\">\n          <div className=\"enter-btn\">\n            <Link to=\"/select\">Enter Game</Link>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Home;\n","import firebase from \"./firebase\";\nconst db = firebase.firestore();\n\nexport const fetchSongList = () => dispatch => {\n  let arr = [];\n  db.collection(\"songList\")\n    .orderBy(\"id\")\n    .get()\n    .then(querySnapshot =>\n      querySnapshot.forEach(doc => {\n        arr = [...arr, { id: doc.id, data: doc.data() }];\n        dispatch({ type: \"FETCH_SONG_LIST\", payload: arr });\n      })\n    );\n};\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\n\nimport { fetchSongList } from \"../../actions/selectSongActions\";\nimport \"./selectSong.css\";\n\nclass SelectSong extends React.Component {\n  componentDidMount() {\n    this.props.fetchSongList();\n  }\n\n  renderSongList() {\n    return this.props.songList.map(song => {\n      return (\n        <div key={song.id} className=\"song\">\n          <div className=\"song-details\">\n            <div className=\"song-title\">{song.data.title}</div>\n            <div className=\"song-auth\">{song.data.auth}</div>\n          </div>\n          <div className=\"difficulty-wrap\">\n            <Link to={`/game/${song.id}?easy`}>\n              <button className=\"difficulty\">EASY</button>\n            </Link>\n            <Link to={`/game/${song.id}?normal`}>\n              <button className=\"difficulty\">NORMAL</button>\n            </Link>\n            <Link to={`/game/${song.id}?hard`}>\n              <button className=\"difficulty\">HARD</button>\n            </Link>\n          </div>\n        </div>\n      );\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"song-list-wrap\">\n        <div className=\"song-list\">{this.renderSongList()}</div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    songList: state.songList,\n    playingSongData: state.playingSongData\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  { fetchSongList }\n)(SelectSong);\n","import React from \"react\";\n\nclass GameCanvas extends React.Component {\n  shouldComponentUpdate() {\n    return false;\n  }\n\n  render() {\n    return (\n      <canvas\n        id=\"game-canvas\"\n        width={this.props.width}\n        height={this.props.height}\n      />\n    );\n  }\n}\n\nexport default GameCanvas;\n","import React from \"react\";\n\nclass PlayerCanvas extends React.Component {\n  shouldComponentUpdate() {\n    return false;\n  }\n\n  render() {\n    return (\n      <canvas\n        ref={this.props.getCanvas}\n        id=\"player-canvas\"\n        width={this.props.width}\n        height={this.props.height}\n      />\n    );\n  }\n}\n\nexport default PlayerCanvas;\n","import React from \"react\";\n\nconst BestRecord = props => {\n  return (\n    <div className=\"battle-board\">\n      Best Record\n      {props.record.slice(0, 1).map(record => {\n        return (\n          <div className=\"score-in-board\" key={record.id}>\n            {record.data.score}\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default BestRecord;\n","import React from \"react\";\n\nconst CurrentSocre = () => {\n  return (\n    <div className=\"battle-board\">\n      Socre\n      <div className=\"score-in-board current-socre\">0</div>\n    </div>\n  );\n};\n\nexport default CurrentSocre;\n","import firebase from \"./firebase\";\nconst db = firebase.firestore();\n\nexport const setInGameState = boolean => {\n  return {\n    type: \"SET_IN_GAME_STATE\",\n    payload: boolean\n  };\n};\n\nexport const setGameFinishState = boolean => {\n  return {\n    type: \"SET_GAME_FINISH_STATE\",\n    payload: boolean\n  };\n};\n\nexport const fetchPlayingSongData = (songId, difficulty) => dispatch => {\n  let obj = {};\n  db.collection(\"songList\")\n    .doc(songId)\n    .collection(\"gameData\")\n    .get()\n    .then(querySnapshot => {\n      querySnapshot.forEach(doc => {\n        obj = Object.assign({\n          audio: new Audio(doc.data().url),\n          beatData: JSON.parse(doc.data()[difficulty]),\n          offset: doc.data().offset\n        });        \n        dispatch({ type: \"FETCH_PLAYING_SONG_DATA\", payload: obj });\n      });\n    })\n    .catch(error => {\n      console.log(\"Error getting documents: \", error);\n      dispatch({\n        type: \"FETCH_PLAYING_SONG_DATA\",\n        payload: \"error\"\n      });\n    });\n};\n\nexport const storeRecordToDB = (doc, difficutly, data) => dispatch => {\n  db.collection(\"songList\")\n    .doc(doc)\n    .collection(difficutly)\n    .add(data)\n    .then(() => {\n      console.log(\"lod一下\", data);\n\n      dispatch({ type: \"STORE_RECORD\" });\n    })\n    .catch(error => {\n      console.log(error.message);\n    });\n};\n","import firebase from \"./firebase\";\nconst db = firebase.firestore();\n\nexport const fetchRankingRecord = (docId, difficutly) => dispatch => {\n  let arr = [];\n  db.collection(\"songList\")\n    .doc(docId)\n    .collection(difficutly)\n    .orderBy(\"score\", \"desc\")\n    .limit(10)\n    .get()\n    .then(q => {\n      q.forEach(doc => {\n        arr.push({ id: doc.id, data: doc.data() });\n        dispatch({ type: \"FETCH_RANKING_RECORD\", payload: arr });\n      });\n    });\n};\n","export const updateLocalStorage = (key, value) => {\n  const tempObj = JSON.parse(localStorage.rankingData);\n  const target = key;\n  tempObj[target] = value;\n  localStorage.rankingData = JSON.stringify(tempObj);\n};\n\nexport const drawReadyState = unit => {\n  const canvas = document.querySelector(\"#game-canvas\");\n  const ctx = canvas.getContext(\"2d\");\n\n  let cw = 18 * unit;\n  let ch = 13 * unit;\n\n  //  lib function\n  ctx.line = function(p1, p2, color, shadowColor, height) {\n    ctx.beginPath();\n    ctx.moveTo(p1.x, p1.y);\n    ctx.lineTo(p2.x, p2.y);\n    ctx.strokeStyle = color;\n    ctx.shadowBlur = 60;\n    ctx.shadowColor = shadowColor;\n    ctx.lineWidth = height;\n    ctx.stroke();\n  };\n\n  for (let i = 0; i < 5; i++) {\n    ctx.line(\n      { x: (i + 7) * unit, y: 0 },\n      { x: ((18 * unit) / 4) * i, y: 13 * unit },\n      \"#000\",\n      null,\n      1\n    );\n  }\n  // Fill Background Color\n  ctx.beginPath();\n  ctx.moveTo(7 * unit, 0);\n  ctx.lineTo(11 * unit, 0);\n  ctx.lineTo(18 * unit, 13 * unit);\n  ctx.lineTo(0, 13 * unit);\n  ctx.closePath();\n  ctx.fillStyle = \"rgba(0,0,0,.8)\";\n  ctx.fill();\n\n  // Press Line\n  ctx.line(\n    { x: 0.5 * unit, y: 12 * unit },\n    { x: 17.5 * unit, y: 12 * unit },\n    \"rgba(142, 226, 163, 0.8)\",\n    null,\n    2\n  );\n\n  // press to start\n  ctx.save();\n  ctx.beginPath();\n  ctx.translate(cw / 2, ch / 2);\n  ctx.textAlign = \"center\";\n  ctx.font = `${unit}px Courier New`;\n  ctx.fillStyle = \"#fff\";\n  ctx.fillText(\"Click to Start\", 0, 0);\n  ctx.restore();\n};\n\nexport const drawComingSoon = unit => {\n  const canvas = document.querySelector(\"#game-canvas\");\n  const ctx = canvas.getContext(\"2d\");\n  ctx.clearRect(0, 0, 18 * unit, 13 * unit);\n  ctx.rect(0, 0, 18 * unit, 13 * unit);\n  ctx.fillStyle = \"#1d1d1d\";\n  ctx.fill();\n  const cw = 18 * unit;\n  const ch = 13 * unit;\n  ctx.save();\n  ctx.beginPath();\n  ctx.translate(cw / 2, ch / 2);\n  ctx.textAlign = \"center\";\n  ctx.font = `${unit}px Courier New`;\n  ctx.fillStyle = \"#fff\";\n  ctx.fillText(\"Coming Soon...\", 0, 0);\n  ctx.restore();\n};\n\nexport const drawTrack = (beginX, trackIndex, unit) => {\n  const canvas = document.querySelector(\"#player-canvas\");\n  const ctx = canvas.getContext(\"2d\");\n  const cw = 18 * unit;\n  const ch = 13 * unit;\n  // Fill Background Color\n  ctx.beginPath();\n  ctx.moveTo(beginX * unit, 0);\n  ctx.lineTo((beginX + 1) * unit, 0);\n  ctx.lineTo((cw * trackIndex) / 4, ch);\n  ctx.lineTo((cw * (trackIndex - 1)) / 4, ch);\n  ctx.closePath();\n  ctx.fillStyle = \"rgba(255,255,255,0.1)\";\n  ctx.fill();\n};\n\nexport const clearCanvas = unit => {\n  const canvas = document.querySelector(\"#player-canvas\");\n  const ctx = canvas.getContext(\"2d\");\n  ctx.clearRect(0, 0, 18 * unit, 13 * unit);\n};\n\nexport const drawJudgeEffect = (trackIndex, unit, text, combo) => {\n  const canvas = document.querySelector(\"#player-canvas\");\n  const ctx = canvas.getContext(\"2d\");\n  const cw = 18 * unit;\n  const ch = 13 * unit;\n\n  ctx.save();\n  ctx.beginPath();\n  ctx.translate((cw * trackIndex) / 4 - cw / 8, 12 * unit - 12);\n  ctx.textAlign = \"center\";\n  if (text === \"MISS\") {\n    ctx.fillStyle = \"rgba(255,255,255,0.6)\";\n    ctx.font = `${unit * 0.7}px Courier New`;\n  } else {\n    ctx.fillStyle = \"#fff\";\n    ctx.font = `${unit}px Courier New`;\n  }\n\n  ctx.fillText(text, 0, 0);\n  ctx.restore();\n\n  if (combo > 1) {\n    ctx.save();\n    ctx.beginPath();\n    ctx.translate(cw / 2, ch / 2);\n    ctx.fillStyle = \"#fff\";\n    ctx.textAlign = \"center\";\n    ctx.font = `${unit}px Courier New`;\n    ctx.fillText(`COMBO ${combo}`, 0, 0);\n    ctx.restore();\n  }\n\n  setTimeout(() => {\n    ctx.clearRect(0, 0, cw, ch);\n  }, 300);\n};\n\nexport const drawFinishState = (unit, currentScore) => {\n  const canvas = document.querySelector(\"#game-canvas\");\n  const ctx = canvas.getContext(\"2d\");\n  const cw = 18 * unit;\n  const ch = 13 * unit;\n  ctx.clearRect(0, 0, cw, ch);\n\n  let score = 0;\n  const drawScore = () => {\n    if (currentScore === 0) {\n      score = 0;\n    } else {\n      score += 98;\n    }\n\n    ctx.clearRect(0, 0, cw, ch);\n    ctx.rect(0, 0, cw, ch);\n    ctx.fillStyle = \"#1d1d1d\";\n    ctx.fill();\n\n    ctx.save();\n    ctx.beginPath();\n    ctx.translate(cw / 2, ch / 4);\n    ctx.textAlign = \"center\";\n    ctx.font = `${unit}px Courier New`;\n    ctx.fillStyle = \"#fff\";\n    ctx.fillText(`You got ${score} points!`, 0, 0);\n    ctx.translate(0, ch / 4);\n    ctx.fillText(\"Click to Ranking Page\", 0, 0);\n    ctx.restore();\n  };\n\n  // set clearInterval as a callback with condition\n  const drawScoreTimer = setInterval(() => {\n    drawScore();\n    if (score >= currentScore) {\n      clearInterval(drawScoreTimer);\n    }\n  }, 5);\n};\n\nexport const getRankingData = () => {\n  if (!localStorage.rankingData) return;\n  const { name, total, hit, miss, combo, score } = JSON.parse(localStorage.rankingData);\n  const accurate = Math.round((hit / total) * 100);\n  let rank;\n  if (accurate >= 90) {\n    rank = \"A\";\n  } else if (accurate >= 80) {\n    rank = \"B\";\n  } else if (accurate >= 70) {\n    rank = \"C\";\n  } else if (accurate >= 60) {\n    rank = \"D\";\n  } else {\n    rank = \"E\";\n  }\n  // console.log({ name, total, hit, miss, combo, score, accurate, rank });\n  return { name, total, hit, miss, combo, score, accurate, rank };\n};\n\nexport const comboScoreCounter = () => {\n  if (!localStorage.rankingData) return;\n  const combo = JSON.parse(localStorage.rankingData).combo;\n  let score;\n  if (combo < 2) {\n    score = 100;\n  } else if (combo > 20) {\n    score = (100 * (100 + Math.pow(20, 2))) / 100;\n  } else {\n    score = (100 * (100 + Math.pow(combo, 2))) / 100;\n  }\n  console.log(\"combo\", combo, \"score\", score);\n  return score;\n};\n","import {\n  updateLocalStorage,\n  getRankingData,\n  comboScoreCounter,\n  drawTrack,\n  clearCanvas,\n  drawJudgeEffect\n} from \"./helpers\";\n\nexport const player = (noteA, noteB, noteC, noteD, unit, audio) => {\n  const btnD = document.querySelector(\".btn-d\");\n  const btnF = document.querySelector(\".btn-f\");\n  const btnK = document.querySelector(\".btn-k\");\n  const btnL = document.querySelector(\".btn-l\");\n  const currentSocre = document.querySelector(\".current-socre\");\n  let hit = 0;\n\n  const judge = (noteArray, trackIndex) => {\n    return () => {\n      if (!noteArray[0]) return;\n      const notePosY = noteArray[0].centerPos.y;\n      let combo = getRankingData().combo;\n      let score = getRankingData().score;\n      if (notePosY > 11 * unit && notePosY < 13 * unit) {\n        hit++;\n        combo++;\n        noteArray.splice(0, 1);\n        drawJudgeEffect(trackIndex, unit, \"HIT\", combo);\n        updateLocalStorage(\"hit\", hit);\n        updateLocalStorage(\"combo\", combo);\n        score += comboScoreCounter();\n        updateLocalStorage(\"score\", score);\n        currentSocre.textContent = getRankingData().score;\n      }\n    };\n  };\n\n  const judgeA = judge(noteA, 1);\n  const judgeB = judge(noteB, 2);\n  const judgeC = judge(noteC, 3);\n  const judgeD = judge(noteD, 4);\n\n  const play = e => {\n    switch (e.keyCode) {\n      // D = 68\n      case 68:\n        btnD.classList.add(\"btn-d-active\");\n        drawTrack(7, 1, unit);\n        judgeA();\n        break;\n      // F = 70\n      case 70:\n        btnF.classList.add(\"btn-f-active\");\n        drawTrack(8, 2, unit);\n        judgeB();\n        break;\n      // K = 75\n      case 75:\n        btnK.classList.add(\"btn-k-active\");\n        drawTrack(9, 3, unit);\n        judgeC();\n        break;\n      // L = 76\n      case 76:\n        btnL.classList.add(\"btn-l-active\");\n        drawTrack(10, 4, unit);\n        judgeD();\n        break;\n      default:\n        break;\n    }\n  };\n\n  const keyupUI = e => {\n    clearCanvas(unit);\n    switch (e.keyCode) {\n      // D = 68\n      case 68:\n        btnD.classList.remove(\"btn-d-active\");\n        break;\n      // F = 70\n      case 70:\n        btnF.classList.remove(\"btn-f-active\");\n        break;\n      // K = 75\n      case 75:\n        btnK.classList.remove(\"btn-k-active\");\n        break;\n      // L = 76\n      case 76:\n        btnL.classList.remove(\"btn-l-active\");\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  window.addEventListener(\"keydown\", play, false);\n  window.addEventListener(\"keyup\", keyupUI, false);\n\n  audio.addEventListener(\"ended\", () => {\n    window.removeEventListener(\"keydown\", play, false);\n    window.removeEventListener(\"keyup\", keyupUI, false);\n  });\n\n  // for mobile\n  btnD.addEventListener(\"touchstart\", () => {\n    drawTrack(7, 1, unit);\n    judgeA();\n  });\n  btnF.addEventListener(\"touchstart\", () => {\n    drawTrack(8, 2, unit);\n    judgeB();\n  });\n  btnK.addEventListener(\"touchstart\", () => {\n    drawTrack(9, 3, unit);\n    judgeC();\n  });\n  btnL.addEventListener(\"touchstart\", () => {\n    drawTrack(10, 4, unit);\n    judgeD();\n  });\n\n  // for mobile\n  btnD.addEventListener(\"touchend\", () => {\n    clearCanvas(unit);\n  });\n  btnF.addEventListener(\"touchend\", () => {\n    clearCanvas(unit);\n  });\n  btnK.addEventListener(\"touchend\", () => {\n    clearCanvas(unit);\n  });\n  btnL.addEventListener(\"touchend\", () => {\n    clearCanvas(unit);\n  });\n};\n","import { player } from \"./player\";\nimport { updateLocalStorage, drawJudgeEffect } from \"./helpers\";\n\nexport const mainGame = (unit, beatData, audio, offset, difficulty) => {\n  audio.play();\n\n  const updateFPS = 100;\n  const speed = unit / 5;\n  let bpm = 100;\n  let round = 0;\n  let noteA = [];\n  let noteB = [];\n  let noteC = [];\n  let noteD = [];\n  let total = 0;\n  let miss = 0;\n  // time offset\n  let lastPosition = offset;\n  // let lastPosition = 0.8;\n\n  if (difficulty === \"easy\") {\n    bpm /= 2;\n  }\n  if (difficulty === \"hard\") {\n    bpm *= 2;\n  }\n\n  const canvas = document.querySelector(\"#game-canvas\");\n  const ctx = canvas.getContext(\"2d\");\n  const cw = 18 * unit;\n  const ch = 13 * unit;\n  const degA = Math.atan2(ch, cw / 2 - 2 * unit);\n  const degB = Math.atan2((cw / 2) * Math.tan(degA), cw / 2 / 2);\n  const overHeight = unit * 2 * Math.tan(degA);\n\n  //  lib function\n  ctx.line = function(p1, p2, color, shadowColor, height) {\n    ctx.beginPath();\n    ctx.moveTo(p1.x, p1.y);\n    ctx.lineTo(p2.x, p2.y);\n    ctx.strokeStyle = color;\n    ctx.shadowBlur = 60;\n    ctx.shadowColor = shadowColor;\n    ctx.lineWidth = height;\n    ctx.stroke();\n  };\n\n  class Pos {\n    constructor(x, y) {\n      this.x = x || 0;\n      this.y = y || 0;\n    }\n  }\n\n  class Note {\n    constructor(args) {\n      let def = {\n        centerPos: new Pos(cw / 2, 0),\n        pos1: new Pos(-(unit * 2), 0),\n        pos2: new Pos(-unit, 0),\n        color: \"#75d0f5\",\n        shadowColor: \"#599eba\",\n        height: unit / 5,\n        speed: speed\n      };\n      Object.assign(def, args);\n      Object.assign(this, def);\n    }\n    render() {\n      ctx.save();\n      ctx.beginPath();\n      ctx.translate(this.centerPos.x, this.centerPos.y);\n      ctx.line(this.pos1, this.pos2, this.color, this.shadowColor, this.height);\n      ctx.restore();\n    }\n    update() {\n      this.centerPos.y += this.speed;\n      if (this.pos1.x !== 0 && this.pos2.x !== 0) {\n        this.pos1.x =\n          ((this.centerPos.y + overHeight) / Math.tan(degA)) *\n          (this.pos1.x / Math.abs(this.pos1.x));\n        this.pos2.x =\n          ((this.centerPos.y + overHeight) / Math.tan(degB)) *\n          (this.pos2.x / Math.abs(this.pos2.x));\n      } else {\n        this.pos1.x =\n          ((this.centerPos.y + overHeight) / Math.tan(degB)) *\n          (this.pos1.x / Math.abs(this.pos1.x));\n        this.pos2.x = 0;\n      }\n    }\n  }\n\n  const update = () => {\n    const currentTime = getFixedTime(audio.currentTime);\n    const deltaTime = getFixedTime(60 / bpm);\n\n    // using SongPosition to generate notes\n    if (getFixedTime(currentTime - lastPosition) === deltaTime) {\n      lastPosition += deltaTime;\n      round++;\n      total += beatData[round].filter(e => e === 1).length;\n\n      noteA.push(new Note());\n      // console.log(\"round\", round);\n      for (let i = 0; i < 4; i++) {\n        if (beatData[round][i] === 1) {\n          switch (i) {\n            case 0:\n              noteA.push(new Note());\n              break;\n            case 1:\n              noteB.push(\n                new Note({\n                  pos1: new Pos(-unit, 0),\n                  pos2: new Pos(),\n                  color: \"#ff0000\",\n                  shadowColor: \"#ff5a5a\"\n                })\n              );\n              break;\n            case 2:\n              noteC.push(\n                new Note({\n                  pos1: new Pos(unit, 0),\n                  pos2: new Pos(),\n                  color: \"#83ff2b\",\n                  shadowColor: \"#6fd328\"\n                })\n              );\n              break;\n            case 3:\n              noteD.push(\n                new Note({\n                  pos1: new Pos(unit, 0),\n                  pos2: new Pos(unit * 2, 0),\n                  color: \"#ffff00\",\n                  shadowColor: \"#fcfc68\"\n                })\n              );\n              break;\n            default:\n              return;\n          }\n        }\n      }\n    }\n\n    // update the position of notes for animation\n    noteA.forEach(e => e.update());\n    noteB.forEach(e => e.update());\n    noteC.forEach(e => e.update());\n    noteD.forEach(e => e.update());\n\n    // remove notes which were outside of the canvas\n    removeNotes(noteA, 1);\n    removeNotes(noteB, 2);\n    removeNotes(noteC, 3);\n    removeNotes(noteD, 4);\n\n    updateLocalStorage(\"total\", total);\n    updateLocalStorage(\"miss\", miss);\n\n    render();\n  };\n\n  const render = () => {\n    ctx.clearRect(0, 0, 18 * unit, 13 * unit);\n    drawBackground();\n    noteA.forEach(e => e.render());\n    noteB.forEach(e => e.render());\n    noteC.forEach(e => e.render());\n    noteD.forEach(e => e.render());\n  };\n\n  const drawBackground = () => {\n    for (let i = 0; i < 5; i++) {\n      ctx.line(\n        { x: (i + 7) * unit, y: 0 },\n        { x: ((18 * unit) / 4) * i, y: 13 * unit },\n        \"#000\",\n        null,\n        1\n      );\n    }\n    // Fill Background Color\n    ctx.beginPath();\n    ctx.moveTo(7 * unit, 0);\n    ctx.lineTo(11 * unit, 0);\n    ctx.lineTo(18 * unit, 13 * unit);\n    ctx.lineTo(0, 13 * unit);\n    ctx.closePath();\n    ctx.fillStyle = \"rgba(0,0,0,.8)\";\n    ctx.fill();\n\n    // Press Line\n    ctx.line(\n      { x: 0.5 * unit, y: 12 * unit },\n      { x: 17.5 * unit, y: 12 * unit },\n      \"rgba(142, 226, 163, 0.8)\",\n      null,\n      2\n    );\n  };\n\n  const getFixedTime = float => {\n    return parseFloat(float.toFixed(1));\n  };\n\n  const removeNotes = (noteArray, trackIndex) => {\n    noteArray.forEach((e, index) => {\n      if (e.centerPos.y > ch) {\n        miss++;\n        noteArray.splice(index, 1);\n        drawJudgeEffect(trackIndex, unit, \"MISS\");\n        updateLocalStorage(\"combo\", 0);\n      }\n    });\n  };\n\n  const startGameTimer = setInterval(() => {\n    update();\n  }, 1000 / updateFPS);\n\n  player(noteA, noteB, noteC, noteD, unit, audio);\n\n  // set the closure let outside Component can clearInterval\n  return () => {\n    clearInterval(startGameTimer);\n    audio.pause();\n    audio.currentTime = 0;\n  };\n};\n","import React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport GameCanvas from \"./GameCanvas\";\nimport PlayerCanvas from \"./PlayerCanvas\";\nimport BestRecord from \"./BestRecord\";\nimport CurrentSocre from \"./CurrentSocre\";\n\nimport {\n  setInGameState,\n  fetchPlayingSongData,\n  setGameFinishState,\n  storeRecordToDB\n} from \"../../actions/gameActions\";\nimport { fetchRankingRecord } from \"../../actions/rankingActions\";\nimport { mainGame } from \"./mainGame\";\nimport {\n  drawReadyState,\n  drawComingSoon,\n  drawFinishState,\n  getRankingData\n} from \"./helpers\";\nimport \"./game.css\";\n\nclass Game extends React.Component {\n  state = { unit: 0 };\n  getCanvas = React.createRef();\n\n  componentWillMount() {\n    this.setCanvasSize();\n  }\n\n  componentDidMount() {\n    console.log(this.props.auth);\n    \n    if (this.props.auth.uid !== \"W2xcTyxXs9Qk8qmqMFUlG5xfais2\") {\n      window.location.hash = \"#/\";\n    }\n\n    const {\n      match,\n      location,\n      fetchPlayingSongData,\n      setInGameState,\n      fetchRankingRecord\n    } = this.props;\n    const docId = match.params.id;\n    const difficulty = location.search.slice(1);\n    fetchPlayingSongData(docId, difficulty);\n    fetchRankingRecord(docId, difficulty);\n    drawReadyState(this.state.unit);\n    // limit player can only click once\n    const startGame = () => {\n      setInGameState(true);\n      this.getCanvas.current.removeEventListener(\"click\", startGame);\n      return false;\n    };\n    this.getCanvas.current.addEventListener(\"click\", startGame);\n  }\n\n  componentDidUpdate() {\n    const { game, match, location, setGameFinishState, auth } = this.props;\n    const docId = match.params.id;\n    const difficulty = location.search.slice(1);\n    if (game.playingSongData === \"error\") {\n      drawComingSoon(this.state.unit);\n    }\n    if (game.inGame && game.playingSongData.audio && !game.gameFinish) {\n      const rankingData = {\n        name: auth.name,\n        total: 0,\n        hit: 0,\n        miss: 0,\n        combo: 0,\n        score: 0\n      };\n      localStorage.setItem(\"rankingData\", JSON.stringify(rankingData));\n      // start game\n      // this.stopGame use the closure in mainGame to clearInterval\n      this.stopGame = mainGame(\n        this.state.unit,\n        game.playingSongData.beatData,\n        game.playingSongData.audio,\n        game.playingSongData.offset,\n        difficulty\n      );\n      const audio = game.playingSongData.audio;\n      audio.addEventListener(\"ended\", () => {\n        const currentSocre = getRankingData().score;\n        this.stopGame();\n        setGameFinishState(true);\n        drawFinishState(this.state.unit, currentSocre);\n        this.storeRecord(docId, difficulty);\n        this.getCanvas.current.addEventListener(\"click\", () => {\n          window.location.hash = `#/ranking/${match.params.id}${\n            location.search\n          }`;\n        });\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    const { setInGameState, setGameFinishState, game } = this.props;\n    setInGameState(false);\n    setGameFinishState(false);\n    // make sure this.stopGame won't be undefined\n    // 使用者未開始遊戲或沒有遊戲資訊的跳轉頁面\n    if (game.inGame && game.playingSongData !== \"error\") {\n      this.stopGame();\n    }\n  }\n\n  setCanvasSize = () => {\n    let unit;\n    if (window.innerWidth > 1024) {\n      unit = Math.round(window.innerWidth * 0.022);\n    } else if (window.innerWidth > 720) {\n      unit = Math.round(window.innerWidth * 0.033);\n    } else {\n      unit = Math.round(window.innerWidth * 0.04);\n    }\n    this.setState({ unit });\n  };\n\n  storeRecord = (docId, difficulty) => {\n    if (!localStorage.rankingData || !getRankingData().name) return;\n    const addZero = number => {\n      if (number < 10) {\n        return `0${number}`;\n      } else {\n        return number;\n      }\n    };\n    const date = new Date();\n    const time = `${date.getFullYear()}/${addZero(\n      date.getMonth() + 1\n    )}/${addZero(date.getDate())} ${addZero(date.getHours())}:${addZero(\n      date.getMinutes()\n    )}`;\n    const data = {\n      name: getRankingData().name,\n      rank: getRankingData().rank,\n      score: getRankingData().score,\n      time: time\n    };\n    storeRecordToDB(docId, difficulty, data);\n  };\n\n  render() {\n    const unit = this.state.unit;\n    const btnStyle = {\n      margin: `${unit * 13 + 31}px 0 0 0`,\n      width: `${unit * 18 + 1}px`\n    };\n    const { ranking } = this.props;\n\n    return (\n      <div className=\"game-view\">\n        <div className=\"game-wrap\">\n          <div className=\"battle\">\n            <BestRecord record={ranking.record} />\n            <CurrentSocre />\n          </div>\n          <div className=\"canvas-wrap\">\n            <GameCanvas width={unit * 18} height={unit * 13} />\n            <PlayerCanvas\n              width={unit * 18}\n              height={unit * 13}\n              getCanvas={this.getCanvas}\n            />\n          </div>\n          <div className=\"game-buttons\" style={btnStyle}>\n            <div className=\"game-btn btn-d\">D</div>\n            <div className=\"game-btn btn-f\">F</div>\n            <div className=\"game-btn btn-k\">K</div>\n            <div className=\"game-btn btn-l\">L</div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    game: state.game,\n    auth: state.auth,\n    ranking: state.ranking\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  {\n    setInGameState,\n    fetchPlayingSongData,\n    setGameFinishState,\n    storeRecordToDB,\n    fetchRankingRecord\n  }\n)(Game);\n","import React from \"react\";\nimport { getRankingData } from \"../Game/helpers\";\n\nconst CurrentRank = props => {\n  return (\n    <>\n      <div className=\"current-ranking\">\n        <div className=\"current-ranking-row\">\n          <div>TotalNotes</div>\n          <div> {getRankingData().total}</div>\n        </div>\n        <div className=\"current-ranking-row\">\n          <div>HIT</div>\n          <div> {getRankingData().hit}</div>\n        </div>\n        <div className=\"current-ranking-row\">\n          <div>MISS</div>\n          <div> {getRankingData().miss}</div>\n        </div>\n        <div className=\"current-ranking-row\">\n          <div>SCORE</div>\n          <div> {getRankingData().score}</div>\n        </div>\n        <div className=\"current-ranking-row\">\n          <div>ACCURATE</div>\n          <div> {getRankingData().accurate} %</div>\n        </div>\n        <div className=\"current-ranking-row\">\n          <div>RANK</div>\n          <div> {getRankingData().rank}</div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default CurrentRank;\n","import React from \"react\";\n\nclass Record extends React.Component {\n  render() {\n    return (\n      <>\n        {this.props.rankingRecord.map(record => {\n          return (\n            <div className=\"record-board\" key={record.id}>\n              <div className=\"record-item\"> {record.data.name}</div>\n              <div className=\"record-item\"> {record.data.score}</div>\n              <div className=\"record-item\"> {record.data.rank}</div>\n              <div className=\"record-item\"> {record.data.time}</div>\n            </div>\n          );\n        })}\n      </>\n    );\n  }\n}\nexport default Record;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { fetchRankingRecord } from \"../../actions/rankingActions\";\nimport CurrentRank from \"./CurrentRank\";\nimport Record from \"./Record\";\nimport \"./ranking.css\";\n\nclass Ranking extends React.Component {\n  componentDidMount() {\n    if (!localStorage.rankingData) {\n      window.location.hash = \"#/\";\n    }\n    const { match, location, fetchRankingRecord } = this.props;\n    const difficulty = location.search.slice(1);\n    if (difficulty !== \"\") {\n      fetchRankingRecord(match.params.id, difficulty);\n    }\n  }\n\n  componentWillUnmount() {\n    localStorage.removeItem(\"rankingData\");\n  }\n\n  render() {\n    return (\n      <div className=\"ranking-view\">\n        <div className=\"ranking-wrap\">\n          {localStorage.rankingData ? <CurrentRank /> : null}\n          <div className=\"record\">\n            <div className=\"record-board title\">\n              <div className=\"record-item\"> Name</div>\n              <div className=\"record-item\"> Score</div>\n              <div className=\"record-item\"> Rank</div>\n              <div className=\"record-item\"> Date</div>\n            </div>\n            <Record rankingRecord={this.props.ranking.record} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    rankingData: state.rankingData,\n    auth: state.auth,\n    ranking: state.ranking\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  { fetchRankingRecord }\n)(Ranking);\n","import React, { Component } from \"react\";\nimport { HashRouter, Route } from \"react-router-dom\";\n\nimport Nav from \"./Nav/Nav\";\nimport AuthForm from \"./AuthForm/AuthForm\";\nimport Home from \"./Home\";\nimport SelectSong from \"./SelectSong/SelectSong\";\nimport Game from \"./Game/Game\";\nimport Ranking from \"./Ranking/Ranking\";\n\nclass App extends Component {\n  render() {\n    return (\n      <HashRouter>\n        <Nav />\n        <AuthForm />\n        <div>\n          <Route path=\"/\" exact component={Home} />\n          <Route path=\"/select\" component={SelectSong} />\n          <Route path=\"/game/:id\" component={Game} />\n          <Route path=\"/ranking/:id\" component={Ranking} />\n        </div>\n      </HashRouter>\n    );\n  }\n}\n\nexport default App;\n","const songListReducer = (state = [], action) => {\n  switch (action.type) {\n    case \"FETCH_SONG_LIST\":\n      return action.payload;\n    default:\n      return state;\n  }\n};\n\nexport default songListReducer;","const initState = {\n  loginForm: false,\n  signUpForm: false,\n  mobileButtons: false\n};\n\nconst showingReducer = (state = initState, action) => {\n  switch (action.type) {\n    case \"SHOW_LOGIN_FORM\":\n      return { ...state, loginForm: action.payload };\n    case \"SHOW_SIGNUP_FORM\":\n      return { ...state, signUpForm: action.payload };\n    case \"SHOW_MOBILE_BUTTONS\":\n      return { ...state, mobileButtons: action.payload };\n    case \"LOGIN_SUCCESS\":\n      return { ...state, loginForm: false };\n    case \"SIGH_UP_SUCCESS\":\n      return { ...state, signUpForm: false };\n    default:\n      return state;\n  }\n};\n\nexport default showingReducer;\n","const initState = {\n  authError: null,\n  uid: null,\n  name: null\n};\n\nconst authReducer = (state = initState, action) => {\n  switch (action.type) {\n    case \"LOGIN_ERROR\":\n      return { ...state, authError: \"Login Failed\" };\n    case \"LOGIN_SUCCESS\":\n      return state;\n    case \"SIGH_UP_SUCCESS\":\n      return { ...state, authError: null };\n    case \"SIGH_UP_ERROR\":\n      return { ...state, authError: action.payload };\n    case \"LOGOUT_SUCCESS\":\n      return { ...state, name: null };\n    case \"FETCH_USER_UID\":\n      return { ...state, uid: action.payload };\n    case \"FETCH_USER_NAME\":\n      return { ...state, name: action.payload };\n    case \"SHOW_LOGIN_FORM\":\n      return { ...state, authError: null };\n    case \"SHOW_SIGNUP_FORM\":\n      return { ...state, authError: null };\n    default:\n      return state;\n  }\n};\n\nexport default authReducer;\n","const initState = {\n  record: []\n};\n\nconst rankingReducer = (state = initState, action) => {\n  switch (action.type) {\n    case \"FETCH_RANKING_RECORD\":\n      return { ...state, record: action.payload };\n    default:\n      return state;\n  }\n};\n\nexport default rankingReducer;\n","const initState = {\n  inGame: false,\n  playingSongData: null,\n  gameFinish: false\n};\n\nconst gameReducer = (state = initState, action) => {\n  switch (action.type) {\n    case \"SET_IN_GAME_STATE\":\n      return { ...state, inGame: action.payload };\n    case \"FETCH_PLAYING_SONG_DATA\":\n      return { ...state, playingSongData: action.payload };\n    case \"SET_GAME_FINISH_STATE\":\n      return { ...state, gameFinish: action.payload };\n    default:\n      return state;\n  }\n};\n\nexport default gameReducer;\n","import { combineReducers } from \"redux\";\n\nimport songListReducer from \"./songListReducer\";\nimport showingReducer from \"./showingReducer\";\nimport authReducer from \"./authReducer\";\nimport rankingReducer from \"./rankingReducer\";\nimport gameReducer from \"./gameReducer\";\n\n\nexport default combineReducers({\n  auth: authReducer,\n  showing: showingReducer,\n  songList: songListReducer,\n  game: gameReducer,\n  ranking: rankingReducer\n});\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { createStore, applyMiddleware } from \"redux\";\nimport thunk from \"redux-thunk\";\n\nimport \"./index.css\";\nimport App from \"./component/App\";\nimport reducers from \"./redeucers\";\n\nconst store = createStore(reducers, applyMiddleware(thunk));\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAQAAAAAYLlVAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfjBQEOGipNUDWeAAAAzElEQVRo3u3YPQ5BURCG4fegQbTYALUrsQIhEdthA9bjLwoKomcBJCo01FfQkKuwiO8W33MWMDNnppgMmJmJBSBHnbwg9psTH2hyJRG9C1FgT0vYgV0gpiRMIM6wFYaHLVSYEEsmIGZMWVq+mZlZKgSgT5uiIPaTDUsYyjbChIRB4EZV2IF7hkQYHr5ZAl1hAqMA9OiIhnDNSli8mZlZalSZ8ZCsYw+mVGAh3QnnKTjTHaUDcICIi6wBZxr/Y3WNgqD6Fye+0v83MwP4AccbjaeK1AN/AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTA1LTAxVDEyOjI2OjQyKzAyOjAwVQ1LxwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0wNS0wMVQxMjoyNjo0MiswMjowMCRQ83sAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC\""],"sourceRoot":""}